import{b as B,i as D,a as F,M as m,d as h,c as V}from"./user-3-fill-2297460f.js";import{u as I}from"./vue-router-0b23dc16.js";import{ch as N,bA as T}from"./auth-0313e5d1.js";import{u as Z}from"./useNav-6f64178a.js";import{c as L,a as M,d as j,b as G}from"./dark-2cec2c5d.js";import{u as _}from"./hooks-e73aa1dd.js";import{h as P,r as E,J as b,o as S,G as q,k as J,l as d,u as o,D as s,e as O,v as W,z as X,a1 as H,x as t,a3 as p,j as C,C as K,B as Q}from"./runtime-core.esm-bundler-185e3605.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import"./mitt-7f99bbc0.js";import"./app-c0ae8c6f.js";import"./index-6d140db2.js";const ee={class:"select-none"},oe=["src"],se={class:"flex-c absolute right-5 top-3"},ae={class:"login-container"},ne={class:"img"},te={class:"login-box"},re={class:"login-form"},le={class:"outline-none"},ie=P({__name:"index",setup(de){const k=I(),c=E(!1),f=E(),{initStorage:R}=L();R();const{dataTheme:w,dataThemeChange:g}=M();g();const{title:$}=Z(),n=b({username:"",password1:"",password2:"",nick_name:""}),z=/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)]|[()])+$)(?!^.*[\u4E00-\u9FA5].*$)([^(0-9a-zA-Z)]|[()]|[a-z]|[A-Z]|[0-9]){6,18}$/,U=b({username:[{validator:(l,e,a)=>{e===""?a(new Error("请输入用户名")):e.length<5||e.length>16?a(new Error("用户名称程度应该在5-16之间")):a()},trigger:"blur"}],password1:[{validator:(l,e,a)=>{e===""?a(new Error("请输入密码")):z.test(e)?a():a(new Error("密码格式应为6-18位数字、字母、符号的任意两种组合"))},trigger:"blur"}],password2:[{validator:(l,e,a)=>{e===""?a(new Error("请输入确认密码")):n.password1!=n.password2?a(new Error("两次密码不一致")):a()},trigger:"blur"}]}),y=async l=>{c.value=!0,l&&await l.validate(async(e,a)=>{if(e){const u={username:n.username,password:n.password1,nick_name:n.nick_name},i=await N(u);if(i.code==0){const{username:v}=i.result;T("注册成功,请牢记账号密码",{type:"success"}),k.push({path:"/login",query:{username:v}})}else c.value=!1}else return c.value=!1,a})};function x({code:l}){l==="Enter"&&y(f.value)}return S(()=>{window.document.addEventListener("keypress",x)}),q(()=>{window.document.removeEventListener("keypress",x)}),(l,e)=>{const a=p("el-switch"),u=p("el-input"),i=p("el-form-item"),v=p("el-button"),A=p("el-form");return C(),J("div",ee,[d("img",{src:o(B),class:"wave"},null,8,oe),d("div",se,[s(a,{modelValue:o(w),"onUpdate:modelValue":e[0]||(e[0]=r=>O(w)?w.value=r:null),"inline-prompt":"","active-icon":o(j),"inactive-icon":o(G),onChange:o(g)},null,8,["modelValue","active-icon","inactive-icon","onChange"])]),d("div",ae,[d("div",ne,[(C(),W(X(H(o(D)))))]),d("div",te,[d("div",re,[s(o(F),{class:"avatar"}),s(o(m),null,{default:t(()=>[d("h2",le,K(o($)),1)]),_:1}),s(A,{ref_key:"ruleFormRef",ref:f,model:n,rules:U,size:"large"},{default:t(()=>[s(o(m),{delay:100},{default:t(()=>[s(i,{prop:"username"},{default:t(()=>[s(u,{clearable:"",modelValue:n.username,"onUpdate:modelValue":e[1]||(e[1]=r=>n.username=r),placeholder:"账号","prefix-icon":o(_)(o(h))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),s(o(m),{delay:150},{default:t(()=>[s(i,null,{default:t(()=>[s(u,{clearable:"",modelValue:n.nick_name,"onUpdate:modelValue":e[2]||(e[2]=r=>n.nick_name=r),placeholder:"昵称","prefix-icon":o(_)(o(h))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),s(o(m),{delay:150},{default:t(()=>[s(i,{prop:"password1"},{default:t(()=>[s(u,{clearable:"","show-password":"",modelValue:n.password1,"onUpdate:modelValue":e[3]||(e[3]=r=>n.password1=r),placeholder:"密码","prefix-icon":o(_)(o(V))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),s(o(m),{delay:150},{default:t(()=>[s(i,{prop:"password2"},{default:t(()=>[s(u,{clearable:"","show-password":"",modelValue:n.password2,"onUpdate:modelValue":e[4]||(e[4]=r=>n.password2=r),placeholder:"确认密码","prefix-icon":o(_)(o(V))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),s(o(m),{delay:250},{default:t(()=>[s(v,{class:"w-full mt-4",size:"default",type:"primary",loading:c.value,onClick:e[5]||(e[5]=r=>y(f.value))},{default:t(()=>[Q(" 注册 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])])])}}});const he=Y(ie,[["__scopeId","data-v-4a450224"]]);export{he as default};
