import{bo as I,bA as D}from"./auth-0313e5d1.js";import{J as $}from"./index-efb1c453.js";import{J as h,r as b,o as J,h as O,v as R,x as a,a3 as i,j as E,D as t,u as e,e as W,B as c,C as V,l as P,ba as F,b9 as G}from"./runtime-core.esm-bundler-185e3605.js";import{u as B}from"./hooks-e73aa1dd.js";import{d as H}from"./search-cc37b371.js";import{d as K}from"./refresh-04c5340d.js";import{d as Q}from"./delete-2f3d40d2.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import"./vue-router-0b23dc16.js";import"./index-6d140db2.js";const Z=n=>I.request("post","/api/message/getMessageList",{data:n}),ee=n=>I.request("put","/api/message/backDelete",{data:n});function ae(){const n=h({current:1,size:10,time:"",message:""}),d=h({...n}),u=b([]),p=b(!1),C=b("small"),r=b([]),v=[{type:"selection",align:"left",width:30},{label:"序号",type:"index",width:55},{label:"昵称",prop:"nick_name",width:120},{label:"头像",prop:"avatar",slot:"avatar",width:80},{label:"留言内容",prop:"message"},{label:"留言日期",prop:"createdAt",width:150}],m=h({pageSize:10,currentPage:1,pageSizes:[10,15,20],total:0,align:"right",background:!0,small:!0}),_=h({text:"正在加载第1页...",viewBox:"-10, -10, 50, 50",spinner:`
        <path class="path" d="
          M 30 15
          L 28 17
          M 25.61 25.61
          A 15 15, 0, 0, 1, 15 30
          A 15 15, 0, 1, 1, 27.99 7.5
          L 15 15
        " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
      `});function g(){l()}const y=()=>{Object.assign(n,d),g()};function x(o){r.value=o}function S(o){n.size=o,l()}async function k(o){typeof o=="number"&&(_.text=`正在加载第${o}页...`,n.current=o,p.value=!0,l())}function M(){r.value.length?$.confirm("确认删除？","提示",{confirmButtonText:"确认",cancelButtonText:"取消"}).then(async()=>{const o=r.value.map(f=>f.id);(await ee({idList:o})).code==0&&(D("批量删除留言成功",{type:"success"}),l())}):D("请先选择留言",{type:"warning"})}async function l(){const o=await Z(n);o.code==0&&(u.value=o.result.list,m.total=o.result.total),p.value=!1}return J(()=>{l()}),{param:n,loading:p,columns:v,dataList:u,tableSize:C,pagination:m,loadingConfig:_,onSearch:g,resetParam:y,onSizeChange:S,onCurrentChange:k,deleteBatch:M,handleSelectionChange:x,getPageMessageList:l}}const te=n=>(F("data-v-b5a11e4c"),n=n(),G(),n),oe=te(()=>P("div",{class:"card-header"},"留言管理",-1)),ne={class:"ml-[5px]"},le=O({__name:"index",setup(n){const{param:d,loading:u,columns:p,dataList:C,tableSize:r,pagination:v,loadingConfig:m,onSearch:_,resetParam:g,onSizeChange:y,onCurrentChange:x,deleteBatch:S,handleSelectionChange:k}=ae();return(M,l)=>{const o=i("el-radio-button"),L=i("el-radio-group"),f=i("el-space"),q=i("el-input"),w=i("el-form-item"),A=i("el-date-picker"),z=i("el-button"),T=i("el-form"),Y=i("el-avatar"),j=i("el-tag"),N=i("pure-table"),U=i("el-card");return E(),R(U,{shadow:"never",class:"card"},{header:a(()=>[oe]),default:a(()=>[t(f,{class:"float-right mb-4"},{default:a(()=>[t(L,{modelValue:e(r),"onUpdate:modelValue":l[0]||(l[0]=s=>W(r)?r.value=s:null),size:"small"},{default:a(()=>[t(o,{label:"large"},{default:a(()=>[c("大")]),_:1}),t(o,{label:"default"},{default:a(()=>[c("中")]),_:1}),t(o,{label:"small"},{default:a(()=>[c("小")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(T,{inline:!0,model:e(d),class:"bg-bg_color w-[99/100]"},{default:a(()=>[t(w,{label:"留言内容：",prop:"username"},{default:a(()=>[t(q,{modelValue:e(d).message,"onUpdate:modelValue":l[1]||(l[1]=s=>e(d).message=s),placeholder:"请输入留言内容",clearable:""},null,8,["modelValue"])]),_:1}),t(w,{label:"留言时间：",prop:"username"},{default:a(()=>[t(A,{modelValue:e(d).time,"onUpdate:modelValue":l[2]||(l[2]=s=>e(d).time=s),type:"daterange",placeholder:"请选择留言时间段","range-separator":"到","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(w,null,{default:a(()=>[t(z,{type:"primary",icon:e(B)(e(H)),loading:e(u),onClick:e(_)},{default:a(()=>[c(" 搜索 ")]),_:1},8,["icon","loading","onClick"]),t(z,{icon:e(B)(e(K)),onClick:e(g)},{default:a(()=>[c(" 重置 ")]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["model"]),t(f,{class:"mb-4 w-[100%] flex justify-between items-center"},{default:a(()=>[t(z,{type:"danger",size:"small",icon:e(B)(e(Q)),onClick:e(S)},{default:a(()=>[c("批量删除")]),_:1},8,["icon","onClick"])]),_:1}),t(N,{border:"","row-key":"id",alignWhole:"center",showOverflowTooltip:"",size:e(r),loading:e(u),"loading-config":e(m),height:"calc(100vh - 350px)",data:e(C),columns:e(p),pagination:e(v),onSizeChange:e(y),onCurrentChange:e(x),onSelectionChange:e(k)},{avatar:a(({row:s})=>[t(Y,{src:s.avatar},{default:a(()=>[c(V(s.nick_name),1)]),_:2},1032,["src"])]),type:a(({row:s})=>[t(j,{type:s.type=="qq"?"":s.type=="wx"?"success":"info"},{default:a(()=>[c(V(s.type),1)]),_:2},1032,["type"]),P("span",ne,V(s.contact),1)]),_:1},8,["size","loading","loading-config","data","columns","pagination","onSizeChange","onCurrentChange","onSelectionChange"])]),_:1})}}});const fe=X(le,[["__scopeId","data-v-b5a11e4c"]]);export{fe as default};
