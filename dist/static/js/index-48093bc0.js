import{bu as Ce,i as se,r as ze,x as F,E as fe,z as re,J as me,_ as ve,Q as pe,au as ke,I as ge,bv as Le,bw as Se,a0 as xe,a6 as Oe,U as Y,ar as Ne,am as $e,an as Re,bx as Ae,b5 as Me,by as Be,bz as Ve,V as Xe,W as Ye,a1 as j,P as G,G as De,Y as Pe,a9 as We}from"./auth-0313e5d1.js";import{h as Z,j as I,k as N,n as m,u as t,m as U,B as Fe,C as Ie,A as T,l as k,q as oe,ac as he,r as L,aG as He,s as je,a as S,w as ue,I as _e,o as Ee,v as ce,D as g,x as O,F as de,z as Ge,X as Ue,y as Ze,R as qe,W as Je,P as Ke,V as Qe}from"./runtime-core.esm-bundler-185e3605.js";import{d as Te,b as et,g as tt}from"./index-efb1c453.js";var nt=/\s/;function at(e){for(var s=e.length;s--&&nt.test(e.charAt(s)););return s}var st=/^\s+/;function rt(e){return e&&e.slice(0,at(e)+1).replace(st,"")}var ye=0/0,ot=/^[-+]0x[0-9a-f]+$/i,lt=/^0b[01]+$/i,it=/^0o[0-7]+$/i,ut=parseInt;function we(e){if(typeof e=="number")return e;if(Ce(e))return ye;if(se(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=se(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=rt(e);var n=lt.test(e);return n||it.test(e)?ut(e.slice(2),n?2:8):ot.test(e)?ye:+e}var ct=function(){return ze.Date.now()};const le=ct;var dt="Expected a function",ft=Math.max,mt=Math.min;function vt(e,s,n){var o,v,y,x,l,w,p=0,b=!1,_=!1,h=!0;if(typeof e!="function")throw new TypeError(dt);s=we(s)||0,se(n)&&(b=!!n.leading,_="maxWait"in n,y=_?ft(we(n.maxWait)||0,s):y,h="trailing"in n?!!n.trailing:h);function d(u){var E=o,R=v;return o=v=void 0,p=u,x=e.apply(R,E),x}function B(u){return p=u,l=setTimeout($,s),b?d(u):x}function f(u){var E=u-w,R=u-p,W=s-E;return _?mt(W,y-R):W}function V(u){var E=u-w,R=u-p;return w===void 0||E>=s||E<0||_&&R>=y}function $(){var u=le();if(V(u))return D(u);l=setTimeout($,f(u))}function D(u){return l=void 0,h&&o?d(u):(o=v=void 0,x)}function P(){l!==void 0&&clearTimeout(l),p=0,o=w=v=l=void 0}function q(){return l===void 0?x:D(le())}function X(){var u=le(),E=V(u);if(o=arguments,v=this,w=u,E){if(l===void 0)return B(w);if(_)return clearTimeout(l),l=setTimeout($,s),d(w)}return l===void 0&&(l=setTimeout($,s)),x}return X.cancel=P,X.flush=q,X}var pt="Expected a function";function ie(e,s,n){var o=!0,v=!0;if(typeof e!="function")throw new TypeError(pt);return se(n)&&(o="leading"in n?!!n.leading:o,v="trailing"in n?!!n.trailing:v),vt(e,s,{leading:o,maxWait:s,trailing:v})}const gt=(e,s)=>{if(!F||!e||!s)return!1;const n=e.getBoundingClientRect();let o;return s instanceof Element?o=s.getBoundingClientRect():o={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<o.bottom&&n.bottom>o.top&&n.right>o.left&&n.left<o.right},be=e=>{let s=0,n=e;for(;n;)s+=n.offsetTop,n=n.offsetParent;return s},Xt=(e,s)=>Math.abs(be(e)-be(s)),Yt=e=>{let s,n;return e.type==="touchend"?(n=e.changedTouches[0].clientY,s=e.changedTouches[0].clientX):e.type.startsWith("touch")?(n=e.touches[0].clientY,s=e.touches[0].clientX):(n=e.clientY,s=e.clientX),{clientX:s,clientY:n}},ht=()=>F&&/firefox/i.test(window.navigator.userAgent),yt=fe({header:{type:String,default:""},bodyStyle:{type:re([String,Object,Array]),default:""},shadow:{type:String,values:["always","hover","never"],default:"always"}}),wt=Z({name:"ElCard"}),bt=Z({...wt,props:yt,setup(e){const s=me("card");return(n,o)=>(I(),N("div",{class:m([t(s).b(),t(s).is(`${n.shadow}-shadow`)])},[n.$slots.header||n.header?(I(),N("div",{key:0,class:m(t(s).e("header"))},[U(n.$slots,"header",{},()=>[Fe(Ie(n.header),1)])],2)):T("v-if",!0),k("div",{class:m(t(s).e("body")),style:oe(n.bodyStyle)},[U(n.$slots,"default")],6)],2))}});var kt=ve(bt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const Dt=pe(kt),It=fe({urlList:{type:re(Array),default:()=>ke([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),_t={close:()=>!0,switch:e=>ge(e)},Et=["src"],Tt=Z({name:"ElImageViewer"}),Ct=Z({...Tt,props:It,emits:_t,setup(e,{expose:s,emit:n}){const o=e,v={CONTAIN:{name:"contain",icon:he(Le)},ORIGINAL:{name:"original",icon:he(Se)}},y=ht()?"DOMMouseScroll":"mousewheel",{t:x}=Te(),l=me("image-viewer"),{nextZIndex:w}=xe(),p=L(),b=L([]),_=He(),h=L(!0),d=L(o.initialIndex),B=je(v.CONTAIN),f=L({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),V=S(()=>{const{urlList:a}=o;return a.length<=1}),$=S(()=>d.value===0),D=S(()=>d.value===o.urlList.length-1),P=S(()=>o.urlList[d.value]),q=S(()=>{const{scale:a,deg:i,offsetX:c,offsetY:C,enableTransition:A}=f.value;let z=c/a,M=C/a;switch(i%360){case 90:case-270:[z,M]=[M,-z];break;case 180:case-180:[z,M]=[-z,-M];break;case 270:case-90:[z,M]=[-M,z];break}const H={transform:`scale(${a}) rotate(${i}deg) translate(${z}px, ${M}px)`,transition:A?"transform .3s":""};return B.value.name===v.CONTAIN.name&&(H.maxWidth=H.maxHeight="100%"),H}),X=S(()=>ge(o.zIndex)?o.zIndex:w());function u(){R(),n("close")}function E(){const a=ie(c=>{switch(c.code){case j.esc:o.closeOnPressEscape&&u();break;case j.space:te();break;case j.left:ne();break;case j.up:r("zoomIn");break;case j.right:ae();break;case j.down:r("zoomOut");break}}),i=ie(c=>{(c.wheelDelta?c.wheelDelta:-c.detail)>0?r("zoomIn",{zoomRate:o.zoomRate,enableTransition:!1}):r("zoomOut",{zoomRate:o.zoomRate,enableTransition:!1})});_.run(()=>{G(document,"keydown",a),G(document,y,i)})}function R(){_.stop()}function W(){h.value=!1}function Q(a){h.value=!1,a.target.alt=x("el.image.error")}function ee(a){if(h.value||a.button!==0||!p.value)return;f.value.enableTransition=!1;const{offsetX:i,offsetY:c}=f.value,C=a.pageX,A=a.pageY,z=ie(H=>{f.value={...f.value,offsetX:i+H.pageX-C,offsetY:c+H.pageY-A}}),M=G(document,"mousemove",z);G(document,"mouseup",()=>{M()}),a.preventDefault()}function J(){f.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function te(){if(h.value)return;const a=De(v),i=Object.values(v),c=B.value.name,A=(i.findIndex(z=>z.name===c)+1)%a.length;B.value=v[a[A]],J()}function K(a){const i=o.urlList.length;d.value=(a+i)%i}function ne(){$.value&&!o.infinite||K(d.value-1)}function ae(){D.value&&!o.infinite||K(d.value+1)}function r(a,i={}){if(h.value)return;const{zoomRate:c,rotateDeg:C,enableTransition:A}={zoomRate:o.zoomRate,rotateDeg:90,enableTransition:!0,...i};switch(a){case"zoomOut":f.value.scale>.2&&(f.value.scale=Number.parseFloat((f.value.scale/c).toFixed(3)));break;case"zoomIn":f.value.scale<7&&(f.value.scale=Number.parseFloat((f.value.scale*c).toFixed(3)));break;case"clockwise":f.value.deg+=C;break;case"anticlockwise":f.value.deg-=C;break}f.value.enableTransition=A}return ue(P,()=>{_e(()=>{const a=b.value[0];a!=null&&a.complete||(h.value=!0)})}),ue(d,a=>{J(),n("switch",a)}),Ee(()=>{var a,i;E(),(i=(a=p.value)==null?void 0:a.focus)==null||i.call(a)}),s({setActiveItem:K}),(a,i)=>(I(),ce(qe,{to:"body",disabled:!a.teleported},[g(Ye,{name:"viewer-fade",appear:""},{default:O(()=>[k("div",{ref_key:"wrapper",ref:p,tabindex:-1,class:m(t(l).e("wrapper")),style:oe({zIndex:t(X)})},[k("div",{class:m(t(l).e("mask")),onClick:i[0]||(i[0]=Oe(c=>a.hideOnClickModal&&u(),["self"]))},null,2),T(" CLOSE "),k("span",{class:m([t(l).e("btn"),t(l).e("close")]),onClick:u},[g(t(Y),null,{default:O(()=>[g(t(Ne))]),_:1})],2),T(" ARROW "),t(V)?T("v-if",!0):(I(),N(de,{key:0},[k("span",{class:m([t(l).e("btn"),t(l).e("prev"),t(l).is("disabled",!a.infinite&&t($))]),onClick:ne},[g(t(Y),null,{default:O(()=>[g(t($e))]),_:1})],2),k("span",{class:m([t(l).e("btn"),t(l).e("next"),t(l).is("disabled",!a.infinite&&t(D))]),onClick:ae},[g(t(Y),null,{default:O(()=>[g(t(Re))]),_:1})],2)],64)),T(" ACTIONS "),k("div",{class:m([t(l).e("btn"),t(l).e("actions")])},[k("div",{class:m(t(l).e("actions__inner"))},[g(t(Y),{onClick:i[1]||(i[1]=c=>r("zoomOut"))},{default:O(()=>[g(t(Ae))]),_:1}),g(t(Y),{onClick:i[2]||(i[2]=c=>r("zoomIn"))},{default:O(()=>[g(t(Me))]),_:1}),k("i",{class:m(t(l).e("actions__divider"))},null,2),g(t(Y),{onClick:te},{default:O(()=>[(I(),ce(Ge(t(B).icon)))]),_:1}),k("i",{class:m(t(l).e("actions__divider"))},null,2),g(t(Y),{onClick:i[3]||(i[3]=c=>r("anticlockwise"))},{default:O(()=>[g(t(Be))]),_:1}),g(t(Y),{onClick:i[4]||(i[4]=c=>r("clockwise"))},{default:O(()=>[g(t(Ve))]),_:1})],2)],2),T(" CANVAS "),k("div",{class:m(t(l).e("canvas"))},[(I(!0),N(de,null,Ue(a.urlList,(c,C)=>Ze((I(),N("img",{ref_for:!0,ref:A=>b.value[C]=A,key:c,src:c,style:oe(t(q)),class:m(t(l).e("img")),onLoad:W,onError:Q,onMousedown:ee},null,46,Et)),[[Xe,C===d.value]])),128))],2),U(a.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var zt=ve(Ct,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const Lt=pe(zt),St=fe({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:re([String,Object])},previewSrcList:{type:re(Array),default:()=>ke([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),xt={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>ge(e),close:()=>!0,show:()=>!0},Ot=["src","loading"],Nt={key:0},$t=Z({name:"ElImage",inheritAttrs:!1}),Rt=Z({...$t,props:St,emits:xt,setup(e,{emit:s}){const n=e;let o="";const{t:v}=Te(),y=me("image"),x=Je(),l=et(),w=L(),p=L(!1),b=L(!0),_=L(!1),h=L(),d=L(),B=F&&"loading"in HTMLImageElement.prototype;let f,V;const $=S(()=>x.style),D=S(()=>{const{fit:r}=n;return F&&r?{objectFit:r}:{}}),P=S(()=>{const{previewSrcList:r}=n;return Array.isArray(r)&&r.length>0}),q=S(()=>{const{previewSrcList:r,initialIndex:a}=n;let i=a;return a>r.length-1&&(i=0),i}),X=S(()=>n.loading==="eager"?!1:!B&&n.loading==="lazy"||n.lazy),u=()=>{F&&(b.value=!0,p.value=!1,w.value=n.src)};function E(r){b.value=!1,p.value=!1,s("load",r)}function R(r){b.value=!1,p.value=!0,s("error",r)}function W(){gt(h.value,d.value)&&(u(),J())}const Q=We(W,200);async function ee(){var r;if(!F)return;await _e();const{scrollContainer:a}=n;Pe(a)?d.value=a:Qe(a)&&a!==""?d.value=(r=document.querySelector(a))!=null?r:void 0:h.value&&(d.value=tt(h.value)),d.value&&(f=G(d,"scroll",Q),setTimeout(()=>W(),100))}function J(){!F||!d.value||!Q||(f==null||f(),d.value=void 0)}function te(r){if(r.ctrlKey){if(r.deltaY<0)return r.preventDefault(),!1;if(r.deltaY>0)return r.preventDefault(),!1}}function K(){P.value&&(V=G("wheel",te,{passive:!1}),o=document.body.style.overflow,document.body.style.overflow="hidden",_.value=!0,s("show"))}function ne(){V==null||V(),document.body.style.overflow=o,_.value=!1,s("close")}function ae(r){s("switch",r)}return ue(()=>n.src,()=>{X.value?(b.value=!0,p.value=!1,J(),ee()):u()}),Ee(()=>{X.value?ee():u()}),(r,a)=>(I(),N("div",{ref_key:"container",ref:h,class:m([t(y).b(),r.$attrs.class]),style:oe(t($))},[w.value!==void 0&&!p.value?(I(),N("img",Ke({key:0},t(l),{src:w.value,loading:r.loading,style:t(D),class:[t(y).e("inner"),t(P)&&t(y).e("preview"),b.value&&t(y).is("loading")],onClick:K,onLoad:E,onError:R}),null,16,Ot)):T("v-if",!0),b.value||p.value?(I(),N("div",{key:1,class:m(t(y).e("wrapper"))},[b.value?U(r.$slots,"placeholder",{key:0},()=>[k("div",{class:m(t(y).e("placeholder"))},null,2)]):p.value?U(r.$slots,"error",{key:1},()=>[k("div",{class:m(t(y).e("error"))},Ie(t(v)("el.image.error")),3)]):T("v-if",!0)],2)):T("v-if",!0),t(P)?(I(),N(de,{key:2},[_.value?(I(),ce(t(Lt),{key:0,"z-index":r.zIndex,"initial-index":t(q),infinite:r.infinite,"zoom-rate":r.zoomRate,"url-list":r.previewSrcList,"hide-on-click-modal":r.hideOnClickModal,teleported:r.previewTeleported,"close-on-press-escape":r.closeOnPressEscape,onClose:ne,onSwitch:ae},{default:O(()=>[r.$slots.viewer?(I(),N("div",Nt,[U(r.$slots,"viewer")])):T("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):T("v-if",!0)],64)):T("v-if",!0)],6))}});var At=ve(Rt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const Pt=pe(At);export{Dt as E,Pt as a,Lt as b,Xt as c,vt as d,Yt as g,ht as i,ie as t};
