import{b5 as N,b6 as z,aF as F}from"./auth-0313e5d1.js";import{h as U,r as d,w as A,j as v,k as g,D as a,x as u,l as _,q as R,u as h,A as x,n as V,v as P,F as $,I as j,a3 as c}from"./runtime-core.esm-bundler-185e3605.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";const D={class:"el-upload-list__item-actions"},E=["onClick"],S=["onClick"],T=U({__name:"upload",props:{fileList:{type:Array,default:()=>{}},limit:{type:Number,default:1},preview:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},width:{type:Number,default:200},height:{type:Number,default:200}},emits:["update:fileList","handleRemove"],setup(i,{emit:y}){const r=i,p=d(!1),f=d(0),e=d([]),o=d(!0),w=()=>{j(()=>{e.value.length>=r.limit&&(o.value=!1),y("update:fileList",e.value)})};function C(l){const n=e.value.findIndex(t=>t.uid==l.uid);f.value=n,p.value=!0}function k(){f.value=0,p.value=!1}const b=async l=>{if(l){const{url:n}=l,t=e.value.findIndex(m=>m.url==n);t!=-1&&e.value.splice(t,1),o.value=!0,y("update:fileList",e.value)}};return A(()=>r.fileList,l=>{e.value=l,l.length>=r.limit&&(o.value=!1),l.length||(o.value=!0)},{immediate:!0,deep:!0}),(l,n)=>{const t=c("el-icon"),m=c("el-image"),B=c("el-upload"),I=c("el-image-viewer");return v(),g($,null,[a(B,{ref:"uploadAvatarRef","file-list":e.value,"onUpdate:file-list":n[0]||(n[0]=s=>e.value=s),class:V([o.value&&!i.preview?"":"hide-upload"]),action:"#","list-type":"picture-card","auto-upload":!1,multiple:i.multiple,limit:i.limit,"on-change":w},{file:u(({file:s})=>[_("div",null,[a(m,{style:R({width:i.width+"px",height:i.height+"px"}),fit:"cover",src:s.url,lazy:""},null,8,["style","src"]),_("span",D,[_("span",{class:"el-upload-list__item-preview",onClick:L=>C(s)},[a(t,null,{default:u(()=>[a(h(N))]),_:1})],8,E),i.preview?x("",!0):(v(),g("span",{key:0,class:"el-upload-list__item-delete",onClick:L=>b(s)},[a(t,null,{default:u(()=>[a(h(z))]),_:1})],8,S))])])]),default:u(()=>[a(t,null,{default:u(()=>[a(h(F))]),_:1})]),_:1},8,["file-list","class","multiple","limit"]),p.value?(v(),P(I,{key:0,"url-list":e.value.map(s=>s.url),"initial-index":f.value,onClose:k},null,8,["url-list","initial-index"])):x("",!0)],64)}}});const K=q(T,[["__scopeId","data-v-ce37ff16"]]);export{K as U};
